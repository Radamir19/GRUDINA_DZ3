# Руководство по работе с репозиторием

Этот документ описывает, как работать с ветками и файлами в репозитории, как оформлять коммиты и Pull Request’ы, и как устроена система approve’ов.

Репозиторий ориентирован на совместную работу над документами: исходники в Markdown и итоговые версии в DOCX.

---

## Структура репозитория

- `content/` — рабочие материалы (Markdown) и финальные версии (DOCX):
  - Примеры Markdown: `communication_plan.md`, `interview.md`, `interview_answers.md`, `meeting_protocol.md`, `questionnari.md`, `questionnari_answers.md`
  - Примеры финальных документов (DOCX): `final_communication_plan.docx`, `final_interview.docx`, `final_interview_answers.docx`, `final_meeting_protocol.docx`, `final_questionnari.docx`, `final_questionnari_answers.docx`
  - Правило: Markdown — это “источник истины”. DOCX — артефакт публикации.
- `docs/` — проектная документация и гайды для контрибьюторов:
  - `contribution.md` — текущий документ с правилами.

---

## Ветки

В репозитории используются роль‑ветки и основная защищённая ветка:

- Основная ветка: `main` (protected)
  - Прямые пуши запрещены. Все изменения — через Pull Request.
- Роль‑ветки (долгоживущие):
  - `Analyst`, `Designer`, `Technical-executive`, `architect`, `supervisor`
  - Отражают зоны ответственности участников.

Рабочий процесс:
- На каждую задачу создавайте короткоживущую ветку от соответствующей роль‑ветки или от `main` (предпочтительно — от своей роль‑ветки, чтобы сохранить контекст ответственности).
- Целевой PR всегда в `main`.

Именование рабочих веток:
- `<тип>/<роль>/<краткое-описание-транслитом-или-англ>`
- Примеры:
  - `feature/analyst/update-interview-questions`
  - `docs/designer/visual-guidelines-readme`
  - `fix/architect/meeting-protocol-typo`
  - `chore/technical-executive/file-structure-cleanup`

Поддерживаемые типы: `feature`, `fix`, `docs`, `chore`, `refactor`, `perf`, `test`, `hotfix`.

Синхронизация:
- Перед открытием PR обновите рабочую ветку: `git fetch && git rebase origin/main` (или `merge` по договорённости команды).
- Конфликты решайте в своей рабочей ветке.

Стратегия мержа:
- “Squash and merge” для линейной истории. Заголовок squash‑коммита должен соответствовать правилам ниже.

---

## Именование файлов и артефактов

- Markdown (рабочие материалы): `snake_case.md`
  - Примеры: `communication_plan.md`, `meeting_protocol.md`, `interview_answers.md`
- Итоговые документы: `final_<snake_case>.docx`
  - Примеры: `final_communication_plan.docx`, `final_questionnari_answers.docx`
- Для новых материалов следуйте тем же паттернам именования.

---

## Стиль коммитов (Conventional Commits)

Формат:
```
<type>(<scope>): <краткое-описание>
```

- Типы: `feat`, `fix`, `docs`, `chore`, `refactor`, `perf`, `test`, `build`, `ci`, `revert`
- Scope (необязательно): область/документ, например: `content`, `docs`, `meeting`, `interview`
- Описание: в повелительном наклонении, до ~72 символов

Примеры:
```
docs(content): update communication_plan.md with stakeholder matrix
fix(content): correct dates in meeting_protocol.md
chore(content): add final_interview.docx generated from interview.md
docs(docs): clarify approvals policy in contribution.md
```

Для ломающих изменений используйте `!` и раздел `BREAKING CHANGE` в теле коммита.

---

## Pull Request: правила и чек‑лист

Перед PR:
- Обновите ветку от `main`
- Убедитесь, что структура и имена файлов соответствуют правилам
- Для Markdown-изменений при необходимости приложите обновлённый DOCX (как артефакт), либо опишите, как его получить

Требования к PR:
- База PR: `main`
- Заголовок по Conventional Commits (смысловой и короткий)
- Описание должно содержать:
  - Что изменено и зачем (контекст)
  - Какие файлы затронуты (Markdown/DOCX)
  - Как проверить результат (шаги/критерии приёмки)
  - Ссылки на задачи/документы при наличии
- Чек‑лист:
  - [ ] Ветка синхронизирована с `main`
  - [ ] Именование файлов соответствует правилам
  - [ ] Markdown — первичен; DOCX обновлён/задокументирован способ получения
  - [ ] Нет лишних/временных файлов

Стратегия мержа: “Squash and merge” после получения нужных approve’ов.

---

## Ревью и система approve’ов

В проекте действует обязательная система approve’ов.

Минимальные требования:
- Минорные правки (описки, форматирование, косметические правки без изменения смысла): минимум 1 approve
- Содержательные изменения рабочих материалов в `content/*.md`: минимум 1 approve от профильной роли (например, для интервью и анкет — от `Analyst`)
- Обновление или добавление финальных документов `final_*.docx`, изменение структуры материалов, существенные правки: минимум 2 approve’а, из них:
  - хотя бы 1 — от `supervisor`
  - второй — от профильной роли (например, `Analyst`/`Designer`/`architect`) в зависимости от сущности изменений

Дополнительно:
- Self‑approve не допускается
- После существенных правок по замечаниям — повторно запросите ревью
- Для срочных hotfix допустим 1 approve (предпочтительно от `supervisor`) с обязательным пост‑ревью

Назначение ревьюеров:
- Автор PR добавляет релевантных ревьюеров из соответствующих ролей
- Если затронуты финальные артефакты (`final_*.docx`) — обязательно добавьте `supervisor`

---

## Рекомендации по работе с документами

- Источник истины — Markdown в `content/`
- Генерацию DOCX фиксируйте: версию шаблона, дату генерации, инструменты/настройки (в описании PR)
- Если DOCX отличается от Markdown — PR должен включать синхронизацию Markdown
- Крупные изменения делите на логические части (отдельные PR): подготовка, правки содержания, финализация

---

## FAQ

- Можно ли работать напрямую в роль‑ветке?
  - Да, но предпочтительно создавать короткоживущие ветки вида `feature/<роль>/<описание>` — это упрощает ревью и историю.
- Что если нужного ревьюера нет в доступе?
  - Отметьте `supervisor` и укажите в описании PR, чья область затронута — для переназначения ревьюера.
- Нужны ли тесты/CI?
  - В этом репозитории основной фокус — документы. Если проверки настроены, PR должен проходить все обязательные проверки.

Спасибо за вклад!
